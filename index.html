<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Success Invite Cookie</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #333;
            color: white;
        }
        .card img {
            max-width: 100%;
            height: auto;
        }
        .order-summary {
            background-color: #f8f9fa;
            color: #000;
        }
    </style>
</head>
<body>
    <header class="text-center py-4">
        <h1 class="display-4">Happy to see you!</h1>
        <br>
        <input type="text" id="name" class="text-center form-control d-inline-block w-50" placeholder="מי מזמין" required>
        <p class="mt-2">Welcome to the homemade cookie ordering website</p>
        <hr>
        <p class="main">We’re happy to see you back to choose from our variety of cookies and flavors.</p>
    </header>

    <h2 id="h2" class="text-center my-3"></h2>

    <div id="container" class="container">
        <div class="row">
            <!-- Savory Cookies -->
            <div class="col-lg-4 col-sm-12 mb-3">
                <div class="card">
                    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTUq-1biyj-fG8_YxsDGboV-MI_jvmMkKeLt7wO454tKouR8J3bk5aT20tO8iDSv2c52WM&usqp=CAU" alt="מלוחות">
                    <div class="card-body">
                        <h3 class="card-title">Savory Cookies</h3>
                        <p class="card-text">
                            <input id="saltCque" type="number" min="0" max="30" step="5" placeholder="0"> : כמות
                        </p>
                        <h5>Total: <span id="numSlat">0</span></h5>
                    </div>
                </div>
            </div>

            <!-- Machine Cookies -->
            <div class="col-lg-4 col-sm-12 mb-3">
                <div class="card">
                    <img src="ML.jpeg" alt="מכונה">
                    <div class="card-body">
                        <h3 class="card-title">Machine Cookies</h3>
                        <p class="card-text">
                            <input id="Mque" type="number" min="0" max="30" step="5" placeholder="0"> : כמות
                        </p>
                        <h5>Total: <span id="numMachine">0</span></h5>
                    </div>
                </div>
            </div>

            <!-- Rolled Cookies -->
            <div class="col-lg-4 col-sm-12 mb-3">
                <div class="card">
                    <img src="תמרים.jpeg" alt="תמרים/שוקולד">
                    <div class="card-body">
                        <h3 class="card-title">Rolled Cookies</h3>
                        <p class="card-text">
                            <input id="Rque" type="number" min="0" max="30" step="5" placeholder="0"> : כמות
                        </p>
                        <p>
                            <select id="selectMenu" class="form-select">
                                <option value="Chocolate">Chocolate</option>
                                <option value="Dates">Dates</option>
                            </select> : מילוי
                        </p>
                        <h5>Total: <span id="numRoll">0</span></h5>
                    </div>
                </div>
            </div>
        </div>

        <!-- Total Price -->
        <div class="my-3">
            <h4>Payment: <span id="totalPrice">0</span> ILS</h4>
            <button class="btn btn-warning" id="sendmassage">Send Order</button>
        </div>

        <!-- Order Summary -->
        <div id="orderSummary" class="order-summary p-3 mt-3 rounded"></div>
    </div>

    <footer class="text-center py-3 mt-5">
        <p>&copy; Author: SAHAR 2024 - All rights reserved</p>
    </footer>

    <script>
        const waitToName = document.getElementById('name');
        const publishName = document.getElementById('h2');
        const container = document.getElementById('container');
        const footer = document.querySelector('footer');

        publishName.style.display = "none";
        container.style.display = "none";
        footer.style.display = "none";

        // מחירים
        const OneCookieRoll = 2.20;
        const OneCookieMachine = 2.10;
        const OneCookieSlat = 1.5;

        const numMachineElement = document.getElementById('numMachine');
        const numRollElement = document.getElementById('numRoll');
        const numSlatElement = document.getElementById('numSlat');
        const totalPriceElement = document.getElementById('totalPrice');

        let totalPrice = 0;

        // עדכון סך הכל
        function updateTotalPrice() {
            const slat = parseFloat(numSlatElement.textContent) || 0;
            const machine = parseFloat(numMachineElement.textContent) || 0;
            const roll = parseFloat(numRollElement.textContent) || 0;
            totalPrice = slat + machine + roll;
            totalPriceElement.textContent = totalPrice.toFixed(2);
        }

        // מאזינים לשינוי כמויות
        document.getElementById('Rque').addEventListener('change', function() {
            const value = parseInt(this.value) || 0;
            numRollElement.textContent = (value * OneCookieRoll).toFixed(2);
            updateTotalPrice();
        });

        document.getElementById('Mque').addEventListener('change', function() {
            const value = parseInt(this.value) || 0;
            numMachineElement.textContent = (value * OneCookieMachine).toFixed(2);
            updateTotalPrice();
        });

        document.getElementById('saltCque').addEventListener('change', function() {
            const value = parseInt(this.value) || 0;
            numSlatElement.textContent = (value * OneCookieSlat).toFixed(2);
            updateTotalPrice();
        });

        // קלט שם משתמש
        waitToName.addEventListener('input', function() {
            let name = waitToName.value.trim().replace(/[<>]/g, '');
            if (name) {
                container.style.display = "block";
                publishName.style.display = "block";
                footer.style.display = "block";
                publishName.textContent = "שלום, " + name;
            } else {
                container.style.display = "none";
                publishName.style.display = "none";
                footer.style.display = "none";
            }
        });

        // מספר הזמנות מ-localStorage
        let orderCount = parseInt(localStorage.getItem('orderCount')) || 0;

        // הצגת ההזמנה
        function showOrder(inviteNum) {
            const tasty = document.getElementById('selectMenu').value;
            const Rque = parseInt(document.getElementById('Rque').value) || 0;
            const Mque = parseInt(document.getElementById('Mque').value) || 0;
            const saltCque = parseInt(document.getElementById('saltCque').value) || 0;
            const username = waitToName.value.trim().replace(/[<>]/g, '');

            const orderSummary = `
                <strong>${inviteNum}</strong><br>
                Name: ${username}<br>
                Savory Cookies: ${saltCque}<br>
                Machine Cookies: ${Mque}<br>
                Rolled Cookies: ${Rque} (${tasty})<br>
                Total Price: ${totalPrice.toFixed(2)} ILS
            `;

            document.getElementById('orderSummary').innerHTML = orderSummary;
        }

        // הגדלת מספר הזמנות ושמירה
        function incrementOrderCount() {
            orderCount++;
            localStorage.setItem('orderCount', orderCount);
            const inviteNum = `מספר ההזמנה: ${orderCount}`;
            showOrder(inviteNum);
        }

        // מאזין לכפתור
        document.getElementById('sendmassage').addEventListener('click', incrementOrderCount);
    </script>
</body>
</html>
